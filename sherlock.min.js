/*!
 * Sherlock
 * Copyright (c) 2014 Tabule, Inc.
 * Version 1.2.8
 */
var Sherlock=function(){var a={rangeSplitters:/(\bto\b|\-|\b(?:un)?till?\b|\bthrough\b|\bthru\b|\band\b|\bends?\b)/g,months:"\\b(jan(?:uary)?|feb(?:ruary)?|mar(?:ch)?|apr(?:il)?|may|jun(?:e)?|jul(?:y)?|aug(?:ust)?|sep(?:tember)?|oct(?:ober)?|nov(?:ember)?|dec(?:ember)?)\\b",days:"\\b(?:(?:(?:on )?the )(?=\\d\\d?(?:st|nd|rd|th)))?([1-2]\\d|3[0-1]|0?[1-9])(?:st|nd|rd|th)?(?:,|\\b)",shortForm:/\b(0?[1-9]|1[0-2])\/([1-2]\d|3[0-1]|0?[1-9])(?:\/(?:20)?1\d)?\b/,weekdays:/(next (?:week (?:on )?)?)?\b(sun|mon|tue(?:s)?|wed(?:nes)?|thurs|fri|sat(?:ur)?)(?:day)?\b/,relativeDateStr:"(next (?:week|month)|tom(?:orrow)?|tod(?:ay)?|day after tom(?:orrow)?)",inRelativeDateStr:"(\\d{1,2}|a) (day|week|month)s?",inRelativeTime:/\b(\d{1,2} ?|a |an )(h(?:our)?|m(?:in(?:ute)?)?)s?\b/,inMilliTime:/\b(\d+) ?(s(?:ec(?:ond)?)?|ms|millisecond)s?\b/,midtime:/(?:@ ?)?\b(?:at )?(noon|midnight)\b/,internationalTime:/\b(?:(0[0-9]|1[3-9]|2[0-3]):?([0-5]\d))\b/,explicitTime:/(?:@ ?)?\b(?:at |from )?(1[0-2]|[1-9])(?::?([0-5]\d))? ?([ap]\.?m?\.?)?(?:o'clock)?\b/,fillerWords:/ (from|is|at|on|for|in|due(?! date)|(?:un)?till?)\b/,fillerWords2:/ (is|due(?! date))\b/},b=null,c=function(){return b?new Date(b.getTime()):new Date},d=function(a){return"undefined"!=typeof Watson&&Watson.config?Watson.config[a]:null},e=function(b,c,e){var h={},j=!1,k=!1,l=i.strToNum(b),m=d("disableRanges")?a.fillerWords2:a.fillerWords;return(j=g(l,c,e))&&(b=b.replace(new RegExp(i.numToStr(j)),"")),(k=f(l,c,e))&&(b=b.replace(new RegExp(i.numToStr(k)),"")),h.eventTitle=b.split(m)[0].trim(),h.isAllDay=!(!j||k),h.isValidDate=!!(j||k||b.match(/\bnow\b/)),h},f=function(b,c){var e,h,i,j,f=0,g=!1;if(e=b.match(new RegExp(a.explicitTime.source,"g")))if(e=e.sort(function(a,b){var c=a.trim().length,d=b.trim().length;return a.match(/(?:a|p).?m.?/)&&(c+=20),b.match(/(?:a|p).?m.?/)&&(d+=20),d-c})[0].trim(),e.length<=2&&b.trim().length>2)f=0;else{f=e.length,e=e.match(a.explicitTime);var k=parseInt(e[1]),l=e[2]||0,m=e[3];m?(0===m.indexOf("p")&&12!=k?k+=12:0===m.indexOf("a")&&12==k&&(k=0),f+=20):12>k&&(7>k||k<c.getHours())&&(k+=12),h=k,i=l,j=!!m,g=e[0]}var n=function(){return g&&(c.setHours(h,i,0),c.hasMeridian=j),g};if(!(4>f))return n();if(e=b.match(a.inRelativeTime))switch(isNaN(e[1])&&(e[1]=1),e[2].substring(0,1)){case"h":return c.setHours(c.getHours()+parseInt(e[1])),e[0];case"m":return c.setMinutes(c.getMinutes()+parseInt(e[1])),e[0];default:return n()}else if(e=b.match(a.inMilliTime))switch(e[2].substring(0,1)){case"s":return c.setSeconds(c.getSeconds()+parseInt(e[1])),e[0];case"m":return c.setMilliseconds(c.getMilliseconds()+parseInt(e[1])),e[0];default:return n()}else{if(!(e=b.match(a.midtime)))return(e=b.match(a.internationalTime))?(c.setHours(e[1],e[2],0),c.hasMeridian=!0,e[0]):n();switch(e[1]){case"noon":return c.setHours(12,0,0),c.hasMeridian=!0,e[0];case"midnight":return c.setHours(0,0,0),c.hasMeridian=!0,e[0];default:return n()}}},g=function(b,c,d){var e;if(e=b.match(a.monthDay))return c.setMonth(i.changeMonth(e[1]),e[2]),e[0];if(e=b.match(a.dayMonth))return c.setMonth(i.changeMonth(e[2]),e[1]),e[0];if(e=b.match(a.shortForm))return c.setMonth(e[1]-1,e[2]),e[0];if(!(e=b.match(a.weekdays))){if(e=b.match(a.inRelativeDateFromRelativeDate))return i.relativeDateMatcher(e[3],c)&&i.inRelativeDateMatcher(e[1],e[2],c)?e[0]:!1;if(e=b.match(a.relativeDate))return i.relativeDateMatcher(e[1],c)?e[0]:!1;if(e=b.match(a.inRelativeDate))return i.inRelativeDateMatcher(e[1],e[2],c)?e[0]:!1;if(e=b.match(new RegExp(a.days,"g"))){if(e=e.sort(function(a,b){return b.trim().length-a.trim().length})[0].trim(),0!==e.indexOf("on")&&(0!==e.indexOf("the")||-1===e.indexOf(",",e.length-1))&&-1===b.indexOf(e,b.length-e.length-1)||(!d||!d.isAllDay)&&e.length<=2)return!1;e=e.match(a.daysOnly);var f=c.getMonth(),g=e[1];return g<c.getDate()&&f++,c.setMonth(f,g),e[0]}return!1}switch(e[2].substr(0,3)){case"sun":return i.changeDay(c,0,e[1]),e[0];case"mon":return i.changeDay(c,1,e[1]),e[0];case"tue":return i.changeDay(c,2,e[1]),e[0];case"wed":return i.changeDay(c,3,e[1]),e[0];case"thu":return i.changeDay(c,4,e[1]),e[0];case"fri":return i.changeDay(c,5,e[1]),e[0];case"sat":return i.changeDay(c,6,e[1]),e[0];default:return!1}},h=function(a,b,d){var e=c();b?a>b&&b>e&&i.isSameDay(a,b)&&i.isSameDay(a,e)?a.hasMeridian?a.setDate(a.getDate()-1):(a.setHours(a.getHours()-12),a>b&&a.setHours(a.getHours()-12)):e>b&&(i.isSameDay(b,e)?d||(b>a&&i.isSameDay(a,e)&&a.setDate(a.getDate()+1),b.setDate(b.getDate()+1)):(b>a&&a.setFullYear(a.getFullYear()+1),b.setFullYear(b.getFullYear()+1))):a&&e>a&&(i.isSameDay(a,e)?d||a.setDate(a.getDate()+1):a.setFullYear(a.getFullYear()+1))},i={relativeDateMatcher:function(a,b){var d=c();switch(a){case"next week":return b.setMonth(d.getMonth(),d.getDate()+7),!0;case"next month":return b.setMonth(b.getMonth()+1),!0;case"tom":return b.setMonth(d.getMonth(),d.getDate()+1),!0;case"tomorrow":return b.setMonth(d.getMonth(),d.getDate()+1),!0;case"day after tomorrow":return b.setMonth(d.getMonth(),d.getDate()+2),!0;case"day after tom":return b.setMonth(d.getMonth(),d.getDate()+2),!0;case"today":return b.setMonth(d.getMonth(),d.getDate()),!0;case"tod":return b.setMonth(d.getMonth(),d.getDate()),!0;default:return!1}},inRelativeDateMatcher:function(a,b,c){switch(a=isNaN(a)?1:parseInt(a),b){case"day":return c.setDate(c.getDate()+a),!0;case"week":return c.setDate(c.getDate()+7*a),!0;case"month":return c.setMonth(c.getMonth()+a),!0;default:return!1}},changeMonth:function(a){return this.monthToInt[a.substr(0,3)]},changeDay:function(a,b,c){var d=7-a.getDay()+b;d>7&&!c&&(d-=7),a.setDate(a.getDate()+d)},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isSameDay:function(a,b){return a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()&&a.getFullYear()===b.getFullYear()},monthToInt:{jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},wordsToInt:{one:1,first:1,two:2,second:2,three:3,third:3,four:4,fourth:4,five:5,fifth:5,six:6,sixth:6,seven:7,seventh:7,eight:8,eighth:8,nine:9,ninth:9,ten:10,tenth:10},intToWords:["one|first","two|second","three|third","four|fourth","five|fifth","six|sixth","seven|seventh","eight|eighth","nine|ninth","ten|tenth"],strToNum:function(b){return b.replace(a.digit,function(a){var b=i.wordsToInt[a];return-1!==a.indexOf("th",a.length-2)?b+="th":-1!==a.indexOf("st",a.length-2)?b+="st":-1!==a.indexOf("nd",a.length-2)?b+="nd":-1!==a.indexOf("rd",a.length-2)&&(b+="rd"),b})},numToStr:function(a){return a.replace(/((?:[1-9]|10)(?:st|nd|rd|th)?)/g,function(a){return"(?:"+a+"|"+i.intToWords[parseInt(a)-1]+")"})}};return a.monthDay=new RegExp(a.months+" "+a.days),a.dayMonth=new RegExp(a.days+"(?: (?:day )?of)? "+a.months),a.daysOnly=new RegExp(a.days),a.digit=new RegExp("\\b("+i.intToWords.join("|")+")\\b","g"),a.relativeDate=new RegExp("\\b"+a.relativeDateStr+"\\b"),a.inRelativeDate=new RegExp("\\b"+a.inRelativeDateStr+"\\b"),a.inRelativeDateFromRelativeDate=new RegExp("\\b"+a.inRelativeDateStr+" from "+a.relativeDateStr+"\\b"),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{parse:function(b){null===b&&(b="");var f=c(),g="undefined"!=typeof Watson?Watson.preprocess(b):[b,{}],b=g[0],j=g[1],k=d("disableRanges")?[b.toLowerCase()]:b.toLowerCase().split(a.rangeSplitters);for(a.rangeSplitters.lastIndex=0,f.setMilliseconds(0);!j.startDate&&(null!==(g=e(k[0],f,null))&&(g.isAllDay&&f.setHours(0,0,0),j.isAllDay=g.isAllDay,j.eventTitle=g.eventTitle,j.startDate=g.isValidDate?f:null),!j.startDate&&k.length>=3);){for(var l=[k[0]+k[1]+k[2]],m=3;m<k.length;m++)l.push(k[m]);k=l}for(;!j.endDate;)if(k.length>1&&(f=new Date(f.getTime()),null!==(g=e(k[2],f,j))&&(j.isAllDay&&f.setHours(0,0,0),g.eventTitle.length>j.eventTitle.length&&(j.eventTitle=g.eventTitle),j.endDate=g.isValidDate?f:null)),!j.endDate){if(!(k.length>=4)){j.endDate=null;break}for(var l=[k[0],k[1],k[2]+k[3]+k[4]],m=5;m<k.length;m++)l.push(k[m]);k=l}if(h(j.startDate,j.endDate,j.isAllDay),j.eventTitle){j.eventTitle=j.eventTitle.replace(/(?:^| )(?:\.|-$|by$|in$|at$|from$|on$|starts?$|for$|(?:un)?till?$|!|,|;)+/g,"");var n=b.match(new RegExp(i.escapeRegExp(j.eventTitle),"i"));n&&(j.eventTitle=n[0].replace(/ +/g," ").trim(),""==j.eventTitle&&(j.eventTitle=null))}else j.eventTitle=null;return"undefined"!=typeof Watson&&Watson.postprocess(j),j},_setNow:function(a){b=a}}}();