/*!
 * Sherlock
 * Copyright (c) 2013 Tabule, Inc.
 * Version 1.2.5
 */
var Sherlock=(function(){var c={rangeSplitters:/(\bto\b|\-|\b(?:un)?till?\b|\bthrough\b|\bthru\b|\band\b)/g,months:"\\b(jan(?:uary)?|feb(?:ruary)?|mar(?:ch)?|apr(?:il)?|may|jun(?:e)?|jul(?:y)?|aug(?:ust)?|sep(?:tember)?|oct(?:ober)?|nov(?:ember)?|dec(?:ember)?)\\b",days:"\\b(?:(?:(?:on )?the )(?=\\d\\d?(?:st|nd|rd|th)))?([1-2]\\d|3[0-1]|0?[1-9])(?:st|nd|rd|th)?(?:,|\\b)",shortForm:/\b(0?[1-9]|1[0-2])(?:\/|\.)([1-2]\d|3[0-1]|0?[1-9])(?:(?:\/|\.)(?:20)?1\d)?\b/,weekdays:/(next (?:week (?:on )?)?)?\b(sun|mon|tue(?:s)?|wed(?:nes)?|thurs|fri|sat(?:ur)?)(?:day)?\b/,relativeDateStr:"(next (?:week|month)|tom(?:orrow)?|tod(?:ay)?|day after tom(?:orrow)?)",inRelativeDateStr:"(\\d{1,2}|a) (day|week|month)s?",inRelativeTime:/\b(\d{1,2} ?|a |an )(h(?:our)?|m(?:in(?:ute)?)?)s?\b/,inMilliTime:/\b(\d+) ?(s(?:ec(?:ond)?)?|ms|millisecond)s?\b/,midtime:/(?:@ ?)?\b(?:at )?(noon|midnight)\b/,militaryTime:/\b(?:([0-2]\d)([0-5]\d))\b/,internationalTime:/\b(?:(0[0-9]|1[3-9]|2[0-3]):([0-5]\d))\b/,explicitTime:/(?:@ ?)?\b(?:at |from )?(1[0-2]|[1-9])(?::?([0-5]\d))? ?([ap]\.?m?\.?)?(?:o'clock)?\b/,fillerWords:/ (from|is|at|on|for|in|due(?! date)|(?:un)?till?)\b/,fillerWords2:/ (is|due(?! date))\b/},i=null,h=function(){if(i){return new Date(i.getTime());}else{return new Date();}},g=function(j){return(typeof Watson!=="undefined"&&Watson.config)?Watson.config[j]:null;},a=function(q,o,n){var l={},j=false,k=false,p=b.strToNum(q),m=g("disableRanges")?c.fillerWords2:c.fillerWords;if(j=e(p,o,n)){q=q.replace(new RegExp(b.numToStr(j)),"");}if(k=f(p,o,n)){q=q.replace(new RegExp(b.numToStr(k)),"");}l.eventTitle=q.split(m)[0].trim();l.isAllDay=!!(j&&!k);l.isValidDate=!!(j||k||q.match(/\bnow\b/));return l;},f=function(p,o,n){var k;if(k=p.match(c.inRelativeTime)){if(isNaN(k[1])){k[1]=1;}switch(k[2].substring(0,1)){case"h":o.setHours(o.getHours()+parseInt(k[1]));return k[0];case"m":o.setMinutes(o.getMinutes()+parseInt(k[1]));return k[0];default:return false;}}else{if(k=p.match(c.inMilliTime)){switch(k[2].substring(0,1)){case"s":o.setSeconds(o.getSeconds()+parseInt(k[1]));return k[0];case"m":o.setMilliseconds(o.getMilliseconds()+parseInt(k[1]));return k[0];default:return false;}}else{if(k=p.match(c.midtime)){switch(k[1]){case"noon":o.setHours(12,0,0);o.hasMeridian=true;return k[0];case"midnight":o.setHours(0,0,0);o.hasMeridian=true;return k[0];default:return false;}}else{if((k=p.match(c.militaryTime))||(k=p.match(c.internationalTime))){o.setHours(k[1],k[2],0);o.hasMeridian=true;return k[0];}else{if(k=p.match(new RegExp(c.explicitTime.source,"g"))){k=k.sort(function(r,q){return q.length-r.length;})[0];if(k.length<=2&&p.trim().length>2){return false;}k=k.match(c.explicitTime);var j=parseInt(k[1]),m=k[2]||0,l=k[3];o.hasMeridian=false;if(l){if(l.indexOf("p")===0&&j!=12){j+=12;}else{if(l.indexOf("a")===0&&j==12){j=0;}}o.hasMeridian=true;}else{if(j<12&&(j<7||j<o.getHours())){j+=12;}}o.setHours(j,m,0);return k[0];}else{return false;
}}}}}},e=function(o,n,l){var k;if(k=o.match(c.monthDay)){n.setMonth(b.changeMonth(k[1]),k[2]);return k[0];}else{if(k=o.match(c.dayMonth)){n.setMonth(b.changeMonth(k[2]),k[1]);return k[0];}else{if(k=o.match(c.weekdays)){switch(k[2].substr(0,3)){case"sun":b.changeDay(n,0,k[1]);return k[0];case"mon":b.changeDay(n,1,k[1]);return k[0];case"tue":b.changeDay(n,2,k[1]);return k[0];case"wed":b.changeDay(n,3,k[1]);return k[0];case"thu":b.changeDay(n,4,k[1]);return k[0];case"fri":b.changeDay(n,5,k[1]);return k[0];case"sat":b.changeDay(n,6,k[1]);return k[0];default:return false;}}else{if(k=o.match(c.inRelativeDateFromRelativeDate)){if(b.relativeDateMatcher(k[3],n)&&b.inRelativeDateMatcher(k[1],k[2],n)){return k[0];}else{return false;}}else{if(k=o.match(c.relativeDate)){if(b.relativeDateMatcher(k[1],n)){return k[0];}else{return false;}}else{if(k=o.match(c.inRelativeDate)){if(b.inRelativeDateMatcher(k[1],k[2],n)){return k[0];}else{return false;}}else{if(k=o.match(c.shortForm)){n.setMonth(k[1]-1,k[2]);return k[0];}else{if(k=o.match(new RegExp(c.days,"g"))){k=k.sort(function(q,p){return p.length-q.length;})[0];if((k.indexOf("on")!==0&&!(k.indexOf("the")===0&&k.indexOf(",",k.length-1)!==-1)&&o.indexOf(k,o.length-k.length-1)===-1)||(!(l&&l.isAllDay)&&k.length<=2)){return false;}k=k.match(c.daysOnly);var m=n.getMonth(),j=k[1];if(j<n.getDate()){m++;}n.setMonth(m,j);return k[0];}else{return false;}}}}}}}}},d=function(m,j,l){var k=h();if(j){if(m>j&&j>k&&b.isSameDay(m,j)&&b.isSameDay(m,k)){if(m.hasMeridian){m.setDate(m.getDate()-1);}else{m.setHours(m.getHours()-12);if(m>j){m.setHours(m.getHours()-12);}}}else{if(j<k){if(b.isSameDay(j,k)){if(!l){if(m<j&&b.isSameDay(m,k)){m.setDate(m.getDate()+1);}j.setDate(j.getDate()+1);}}else{if(m<j){m.setFullYear(m.getFullYear()+1);}j.setFullYear(j.getFullYear()+1);}}}}else{if(m){if(m<k){if(b.isSameDay(m,k)){if(!l){m.setDate(m.getDate()+1);}}else{m.setFullYear(m.getFullYear()+1);}}}}},b={relativeDateMatcher:function(k,l){var j=h();switch(k){case"next week":l.setMonth(j.getMonth(),j.getDate()+7);return true;case"next month":l.setMonth(l.getMonth()+1);return true;case"tom":l.setMonth(j.getMonth(),j.getDate()+1);return true;case"tomorrow":l.setMonth(j.getMonth(),j.getDate()+1);return true;case"day after tomorrow":l.setMonth(j.getMonth(),j.getDate()+2);return true;case"day after tom":l.setMonth(j.getMonth(),j.getDate()+2);return true;case"today":l.setMonth(j.getMonth(),j.getDate());return true;case"tod":l.setMonth(j.getMonth(),j.getDate());return true;default:return false;}},inRelativeDateMatcher:function(j,l,k){if(isNaN(j)){j=1;}else{j=parseInt(j);}switch(l){case"day":k.setDate(k.getDate()+j);return true;case"week":k.setDate(k.getDate()+j*7);return true;case"month":k.setMonth(k.getMonth()+j);return true;default:return false;}},changeMonth:function(j){return this.monthToInt[j.substr(0,3)];},changeDay:function(m,k,j){var l=7-m.getDay()+k;if(l>7&&!j){l-=7;}m.setDate(m.getDate()+l);},escapeRegExp:function(j){return j.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");
},isSameDay:function(k,j){return k.getMonth()===j.getMonth()&&k.getDate()===j.getDate()&&k.getFullYear()===j.getFullYear();},monthToInt:{jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},wordsToInt:{one:1,first:1,two:2,second:2,three:3,third:3,four:4,fourth:4,five:5,fifth:5,six:6,sixth:6,seven:7,seventh:7,eight:8,eighth:8,nine:9,ninth:9,ten:10,tenth:10},intToWords:["one|first","two|second","three|third","four|fourth","five|fifth","six|sixth","seven|seventh","eight|eighth","nine|ninth","ten|tenth"],strToNum:function(j){return j.replace(c.digit,function(l){var k=b.wordsToInt[l];if(l.indexOf("th",l.length-2)!==-1){k+="th";}else{if(l.indexOf("st",l.length-2)!==-1){k+="st";}else{if(l.indexOf("nd",l.length-2)!==-1){k+="nd";}else{if(l.indexOf("rd",l.length-2)!==-1){k+="rd";}}}}return k;});},numToStr:function(j){return j.replace(/((?:[1-9]|10)(?:st|nd|rd|th)?)/g,function(k){return"(?:"+k+"|"+b.intToWords[parseInt(k)-1]+")";});}};c.monthDay=new RegExp(c.months+" "+c.days);c.dayMonth=new RegExp(c.days+"(?: (?:day )?of)? "+c.months);c.daysOnly=new RegExp(c.days);c.digit=new RegExp("\\b("+b.intToWords.join("|")+")\\b","g");c.relativeDate=new RegExp("\\b"+c.relativeDateStr+"\\b");c.inRelativeDate=new RegExp("\\b"+c.inRelativeDateStr+"\\b");c.inRelativeDateFromRelativeDate=new RegExp("\\b"+c.inRelativeDateStr+" from "+c.relativeDateStr+"\\b");if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}return{parse:function(r){if(r===null){r="";}var p=h(),j=(typeof Watson!=="undefined")?Watson.preprocess(r):[r,{}],r=j[0],o=j[1],q=g("disableRanges")?[r.toLowerCase()]:r.toLowerCase().split(c.rangeSplitters);c.rangeSplitters.lastIndex=0;p.setMilliseconds(0);while(!o.startDate){if((j=a(q[0],p,null))!==null){if(j.isAllDay){p.setHours(0,0,0);}o.isAllDay=j.isAllDay;o.eventTitle=j.eventTitle;o.startDate=j.isValidDate?p:null;}if(!o.startDate&&q.length>=3){var m=[q[0]+q[1]+q[2]];for(var l=3;l<q.length;l++){m.push(q[l]);}q=m;}else{break;}}while(!o.endDate){if(q.length>1){p=new Date(p.getTime());if((j=a(q[2],p,o))!==null){if(o.isAllDay){p.setHours(0,0,0);}if(j.eventTitle.length>o.eventTitle.length){o.eventTitle=j.eventTitle;}o.endDate=j.isValidDate?p:null;}}if(!o.endDate){if(q.length>=4){var m=[q[0],q[1],q[2]+q[3]+q[4]];for(var l=5;l<q.length;l++){m.push(q[l]);}q=m;}else{o.endDate=null;break;}}}d(o.startDate,o.endDate,o.isAllDay);if(o.eventTitle){o.eventTitle=o.eventTitle.replace(/(?:^| )(?:\.|-$|by$|in$|at$|from$|on$|for$|(?:un)?till?$|!|,|;)+/g,"");var n=r.match(new RegExp(b.escapeRegExp(o.eventTitle),"i"));if(n){o.eventTitle=n[0].replace(/ +/g," ").trim();if(o.eventTitle==""){o.eventTitle=null;}}}else{o.eventTitle=null;}if(typeof Watson!=="undefined"){Watson.postprocess(o);}return o;},_setNow:function(j){i=j;}};})();